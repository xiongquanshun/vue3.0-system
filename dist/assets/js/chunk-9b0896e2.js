(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9b0896e2"],{"35d1":function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},"43d3":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"table systemOrgan"},[r("div",{ref:"organList",staticClass:"container"},[r("div",{staticClass:"title"},[e._v("设备列表")]),r("img",{attrs:{src:n("68c8"),alt:""}}),r("vo-edit",{ref:"chart",style:{width:e.organListW,height:e.organListH},attrs:{data:e.chartData,direction:"l2r"}}),r("div",{staticClass:"view-state edit-container",attrs:{id:"edit-panel"}},[r("div",{staticClass:"item item-half"},[e._m(0),r("div",[r("label",[e._v("新增的机构名称")]),r("ul",{attrs:{id:"new-nodelist"}},[r("li",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.addName,expression:"addName"}],staticClass:"new-node",attrs:{type:"text"},domProps:{value:e.addName},on:{input:function(t){t.target.composing||(e.addName=t.target.value)}}})])])])]),r("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"radio-panel item",attrs:{id:"node-type-panel"}},[r("input",{attrs:{type:"radio",name:"node-type",id:"rd-sibling",value:"siblings",checked:""}}),r("label",{attrs:{for:"rd-sibling"}},[e._v("Sibling")])]),r("div",{staticClass:"item"},[r("el-button",{attrs:{type:"primary"},on:{click:e.addNodes}},[e._v("添加")]),r("el-button",{attrs:{type:"primary"},on:{click:e.deleteNodes}},[e._v("删除")])],1)])],1),r("div",{staticClass:"container"},[r("div",{staticClass:"title"},[e._v("机构详情")]),r("div",{staticClass:"form-boxs"},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[r("div",{staticClass:"form-title"},[r("div",{staticClass:"form-title-text"},[r("font",{staticStyle:{"font-size":"16px","font-weight":"600"}},[e._v("基本信息")]),r("font")],1),r("div",{staticClass:"form-title-bar"},[r("div",{staticClass:"form-title-bar2"})])]),r("el-form-item",{attrs:{label:"机构名称"}},[r("el-input",{staticClass:"el-input",model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"机构设备数量"}},[r("div",[e._v("500张")])]),r("div",{staticClass:"form-title"},[r("div",{staticClass:"form-title-text"},[r("font",{staticStyle:{"font-size":"16px","font-weight":"600"}},[e._v("收款信息")]),r("font")],1),r("div",{staticClass:"form-title-bar"},[r("div",{staticClass:"form-title-bar2"})])]),r("el-form-item",{attrs:{label:"公众号名称"}},[r("el-input",{staticClass:"el-input",model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"公众号appId"}},[r("el-input",{staticClass:"el-input",model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"JS接口验证文件"}}),r("el-form-item",{attrs:{label:"微信支付商户号"}},[r("div",[e._v("500张")])]),r("el-form-item",{attrs:{label:"API密钥"}},[r("div",[e._v("500张")])]),r("el-form-item",{staticClass:"saveBtn"},[r("el-button",{attrs:{type:"primary"},on:{click:e.saveData}},[e._v("确定保存")])],1)],1)],1)])])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-node-container"},[n("label",{staticClass:"selected-node-group"},[e._v("选择删除的机构名称")]),n("input",{staticClass:"selected-node-group new-node",attrs:{type:"text",id:"selected-node"}})])}],o=(n("3b54"),n("9fa4"),n("f763"),n("8985")),a={name:"basetable",data:function(){return{chartData:{},addName:"",organListW:0,organListH:0,form:{name:"深圳大学风槐斋",type:"照片",status:"离线",ascription:"益网互联公司",address:"",ip:"9c-f6-dd-b0-70-1e",addr:"",docPaper:"",phoPaper:"",alert:""}}},components:{VoEdit:o["VoEdit"]},mounted:function(){this.$nextTick(this.mountOrgchart());var e=this.$refs.organList.offsetHeight,t=this.$refs.organList.offsetWidth;this.organListW=t+"px",this.organListH=e-180+"px",document.getElementsByClassName("orgchart")[0].style.width=e-180+"px",document.getElementsByClassName("orgchart")[0].style.height=t+"px"},created:function(){this.chartData={name:"益网互联",className:"top-level",children:[{name:"川纳",className:"middle-level"},{name:"印记",className:"middle-level"},{name:"腾讯"}]}},methods:{saveData:function(){console.log("保存数据")},mountOrgchart:function(){var e=this;this.$children.forEach(function(t){void 0!==t.orgchart&&(e.orgchart=t.orgchart)})},addNodes:function(){var e=this,t={name:this.addName,className:"middle-level"};this.chartData.children.push(t),console.log(this.chartData);var n=[];if(Array.from(document.getElementById("new-nodelist").querySelectorAll(".new-node")).forEach(function(e){var t=e.value.trim();t&&n.push(t)}),n.length){var r=document.querySelector("#chart-container .nodes tr>td>div");this.orgchart.addSiblings(r,{siblings:n.map(function(t){return{name:t,relationship:"110",Id:e.getId()}})})}else alert("请输入新增机构名称")},deleteNodes:function(){var e=document.getElementById("selected-node"),t=document.getElementById(e.dataset.node);if(t){if(t===document.querySelector(".orgchart").querySelector(".node")){for(var n=t.classList,r=0;r<n.length;r++)if("top-level"==n[r])return void alert("该节点不能删除");if(!window.confirm("Are you sure you want to delete the whole chart?"))return}this.orgchart.removeNodes(t),e.value="",e.dataset.node=""}else alert("Please select one node in orgchart")},exportJSON:function(){var e={},t=this.orgchart.getChartJSON();if(e=JSON.stringify(t,null,2),document.getElementsByTagName("code")[0]){var n=document.getElementsByTagName("code")[0];n.innerHTML=e}return e},getId:function(){return 1e3*(new Date).getTime()+Math.floor(1001*Math.random())}}},s=a,l=(n("dc53"),n("45c9"),n("17cc")),c=Object(l["a"])(s,r,i,!1,null,"01d0dc29",null);t["default"]=c.exports},"45c9":function(e,t,n){"use strict";var r=n("7d41"),i=n.n(r);i.a},"68c8":function(e,t){e.exports="data:image/png;base64,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"},"7d41":function(e,t,n){},8985:function(e,t,n){(function(e,n){!function(e,n){n(t)}(0,function(t){"use strict";function r(e,t){return e===t||e!=e&&t!=t}function i(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}function o(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function a(e){return null==e?void 0===e?Q:Z:G&&G in Object(e)?function(e){var t=J.call(e,Y),n=e[Y];try{e[Y]=void 0;var r=!0}catch(e){}var i=X.call(e);return r&&(t?e[Y]=n:delete e[Y]),i}(e):function(e){return W.call(e)}(e)}function s(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function l(e){if(!s(e))return!1;var t=a(e);return t==$||t==ee||t==K||t==te}function c(e){return!(!s(e)||function(e){return!!re&&re in e}(e))&&(l(e)?de:oe).test(function(e){if(null!=e){try{return ie.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function d(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return c(n)?n:void 0}function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function h(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function f(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function p(e){var t=this.__data__=new o(e);this.size=t.size}function v(e,t,n){"__proto__"==t&&ye?ye(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function g(e,t,n){(void 0===n||r(e[t],n))&&(void 0!==n||t in e)||v(e,t,n)}function m(e,t){var n=t?function(e){var t=new e.constructor(e.byteLength);return new Le(t).set(new Le(e)),t}(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function y(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||xe)}function b(e){return null!=e&&"object"==typeof e}function _(e){return b(e)&&a(e)==qe}function A(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Pe}function E(e){return null!=e&&A(e.length)&&!l(e)}function S(e,t,n){var i=e[t];$e.call(e,t)&&r(i,n)&&(void 0!==n||t in e)||v(e,t,n)}function L(e,t){return!!(t=null==t?et:t)&&("number"==typeof e||tt.test(e))&&e>-1&&e%1==0&&e<t}function C(e,t){var n=Te(e),r=!n&&Oe(e),i=!n&&!r&&He(e),o=!n&&!r&&!i&&Ke(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=s.length;for(var c in e)!t&&!nt.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||L(c,l))||s.push(c);return s}function w(e){if(!s(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=y(e),n=[];for(var r in e)("constructor"!=r||!t&&rt.call(e,r))&&n.push(r);return n}function N(e){return E(e)?C(e,!0):w(e)}function x(e){return function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),i?v(n,s,l):S(n,s,l)}return n}(e,N(e))}function q(e,t,n,r,i,o,c){var d=e[n],u=t[n],h=c.get(u);if(h)g(e,n,h);else{var f=o?o(d,u,n+"",e,t,c):void 0,p=void 0===f;if(p){var v=Te(u),_=!v&&He(u),A=!v&&!_&&Ke(u);f=u,v||_||A?Te(d)?f=d:function(e){return b(e)&&E(e)}(d)?f=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(d):_?(p=!1,f=function(e,t){if(t)return e.slice();var n=e.length,r=Se?Se(n):new e.constructor(n);return e.copy(r),r}(u,!0)):A?(p=!1,f=m(u,!0)):f=[]:function(e){if(!b(e)||a(e)!=Re)return!1;var t=Ne(e);if(null===t)return!0;var n=Ve.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Fe.call(n)==Je}(u)||Oe(u)?(f=d,Oe(d)?f=x(d):(!s(d)||r&&l(d))&&(f=function(e){return"function"!=typeof e.constructor||y(e)?{}:we(Ne(e))}(u))):p=!1}p&&(c.set(u,f),i(f,u,r,o,c),c.delete(u)),g(e,n,f)}}function k(e,t,n,r,i){e!==t&&be(t,function(o,a){if(s(o))i||(i=new p),q(e,t,a,n,k,r,i);else{var l=r?r(e[a],o,a+"",e,t,i):void 0;void 0===l&&(l=o),g(e,a,l)}},N)}function j(e){return e}function B(e,t){return ct(function(e,t,n){return t=it(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=it(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,s)}}(e,t,j),e+"")}var O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},P=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},I=function(){function e(t){T(this,e),this._name="OrgChart",Promise.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})})};var n=this,r=D({nodeTitle:"name",nodeId:"id",toggleSiblingsResp:!1,depth:999,chartClass:"",exportButton:!1,exportButtonName:"Export",exportFilename:"OrgChart",parentNodeSymbol:"",draggable:!1,direction:"t2b",pan:!1,zoom:!1,toggleCollapse:!0},t),i=r.data,o=document.createElement("div"),a=document.querySelector(r.chartContainer);if(this.options=r,delete this.options.data,this.chart=o,this.chartContainer=a,o.dataset.options=JSON.stringify(r),o.setAttribute("class","orgchart"+(""!==r.chartClass?" "+r.chartClass:"")+("t2b"!==r.direction?" "+r.direction:"")),"object"===(void 0===i?"undefined":O(i)))this.buildHierarchy(o,r.ajaxURL?i:this._attachRel(i,"00"),0);else if("string"==typeof i&&i.startsWith("#"))this.buildHierarchy(o,this._buildJsonDS(document.querySelector(i).children[0]),0);else{var s=document.createElement("i");s.setAttribute("class","fa fa-circle-o-notch fa-spin spinner"),o.appendChild(s),this._getJSON(i).then(function(e){n.buildHierarchy(o,r.ajaxURL?e:n._attachRel(e,"00"),0)}).catch(function(e){console.error("failed to fetch datasource for orgchart",e)}).finally(function(){var e=o.querySelector(".spinner");e.parentNode.removeChild(e)})}if(o.addEventListener("click",this._clickChart.bind(this)),r.exportButton&&!a.querySelector(".oc-export-btn")){var l=document.createElement("button"),c=document.createElement("a");l.setAttribute("class","oc-export-btn"+(""!==r.chartClass?" "+r.chartClass:"")),"Export"===r.exportButtonName?l.innerHTML="Export":l.innerHTML=""+r.exportButtonName,l.addEventListener("click",this._clickExportButton.bind(this)),c.setAttribute("class","oc-download-btn"+(""!==r.chartClass?" "+r.chartClass:"")),c.setAttribute("download",r.exportFilename+".png"),a.appendChild(l),a.appendChild(c)}r.pan&&(a.style.overflow="hidden",o.addEventListener("mousedown",this._onPanStart.bind(this)),o.addEventListener("touchstart",this._onPanStart.bind(this)),document.body.addEventListener("mouseup",this._onPanEnd.bind(this)),document.body.addEventListener("touchend",this._onPanEnd.bind(this))),r.zoom&&(a.addEventListener("wheel",this._onWheeling.bind(this)),a.addEventListener("touchstart",this._onTouchStart.bind(this)),document.body.addEventListener("touchmove",this._onTouchMove.bind(this)),document.body.addEventListener("touchend",this._onTouchEnd.bind(this))),a.appendChild(o)}return P(e,[{key:"_closest",value:function(e,t){return e&&(t(e)&&e!==this.chart?e:this._closest(e.parentNode,t))}},{key:"_siblings",value:function(e,t){return Array.from(e.parentNode.children).filter(function(n){return n!==e&&(!t||e.matches(t))})}},{key:"_prevAll",value:function(e,t){for(var n=[],r=e.previousElementSibling;r;)t&&!r.matches(t)||n.push(r),r=r.previousElementSibling;return n}},{key:"_nextAll",value:function(e,t){for(var n=[],r=e.nextElementSibling;r;)t&&!r.matches(t)||n.push(r),r=r.nextElementSibling;return n}},{key:"_isVisible",value:function(e){return null!==e.offsetParent}},{key:"_addClass",value:function(e,t){e.forEach(function(e){t.indexOf(" ")>0?t.split(" ").forEach(function(t){return e.classList.add(t)}):e.classList.add(t)})}},{key:"_removeClass",value:function(e,t){e.forEach(function(e){t.indexOf(" ")>0?t.split(" ").forEach(function(t){return e.classList.remove(t)}):e.classList.remove(t)})}},{key:"_css",value:function(e,t,n){e.forEach(function(e){e.style[t]=n})}},{key:"_removeAttr",value:function(e,t){e.forEach(function(e){e.removeAttribute(t)})}},{key:"_one",value:function(e,t,n,r){e&&e.addEventListener(t,function i(o){try{n.call(r,o)}finally{e.removeEventListener(t,i)}})}},{key:"_getDescElements",value:function(e,t){var n=[];return e.forEach(function(e){return n.push.apply(n,M(e.querySelectorAll(t)))}),n}},{key:"_getJSON",value:function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e),r.onreadystatechange=function(){4===this.readyState&&(200===this.status?t(JSON.parse(this.response)):n(new Error(this.statusText)))},r.responseType="json",r.setRequestHeader("Content-Type","application/json"),r.send()})}},{key:"_buildJsonDS",value:function(e){var t=this,n={name:e.firstChild.textContent.trim(),relationship:("LI"===e.parentNode.parentNode.nodeName?"1":"0")+(e.parentNode.children.length>1?1:0)+(e.children.length?1:0)};return e.id&&(n.id=e.id),e.querySelector("ul")&&Array.from(e.querySelector("ul").children).forEach(function(e){n.children||(n.children=[]),n.children.push(t._buildJsonDS(e))}),n}},{key:"_attachRel",value:function(e,t){if(e.relationship=t+(e.children&&e.children.length>0?1:0),e.children){var n=!0,r=!1,i=void 0;try{for(var o,a=e.children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;this._attachRel(s,"1"+(e.children.length>1?1:0))}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}return e}},{key:"_repaint",value:function(e){e&&(e.style.offsetWidth=e.offsetWidth)}},{key:"_isInAction",value:function(e){return e.querySelector(":scope > .edge").className.indexOf("fa-")>-1}},{key:"_getNodeState",value:function(e,t){var n=this,r=void 0,i={exist:!1,visible:!1};return"parent"===t?((r=this._closest(e,function(e){return e.classList&&e.classList.contains("nodes")}))&&(i.exist=!0),i.exist&&this._isVisible(r.parentNode.children[0])&&(i.visible=!0)):"children"===t?((r=this._closest(e,function(e){return"TR"===e.nodeName}).nextElementSibling)&&(i.exist=!0),i.exist&&this._isVisible(r)&&(i.visible=!0)):"siblings"===t&&((r=this._siblings(this._closest(e,function(e){return"TABLE"===e.nodeName}).parentNode)).length&&(i.exist=!0),i.exist&&r.some(function(e){return n._isVisible(e)})&&(i.visible=!0)),i}},{key:"getRelatedNodes",value:function(e,t){return"parent"===t?this._closest(e,function(e){return e.classList.contains("nodes")}).parentNode.children[0].querySelector(".node"):"children"===t?Array.from(this._closest(e,function(e){return"TABLE"===e.nodeName}).lastChild.children).map(function(e){return e.querySelector(".node")}):"siblings"===t?this._siblings(this._closest(e,function(e){return"TABLE"===e.nodeName}).parentNode).map(function(e){return e.querySelector(".node")}):[]}},{key:"_switchHorizontalArrow",value:function(e){var t=this.options,n=e.querySelector(".leftEdge"),r=e.querySelector(".rightEdge"),i=this._closest(e,function(e){return"TABLE"===e.nodeName}).parentNode;if(t.toggleSiblingsResp&&(void 0===t.ajaxURL||this._closest(e,function(e){return e.classList.contains(".nodes")}).dataset.siblingsLoaded)){var o=i.previousElementSibling,a=i.nextElementSibling;o&&(o.classList.contains("hidden")?(n.classList.add("fa-chevron-left"),n.classList.remove("fa-chevron-right")):(n.classList.add("fa-chevron-right"),n.classList.remove("fa-chevron-left"))),a&&(a.classList.contains("hidden")?(r.classList.add("fa-chevron-right"),r.classList.remove("fa-chevron-left")):(r.classList.add("fa-chevron-left"),r.classList.remove("fa-chevron-right")))}else{var s=this._siblings(i),l=!!s.length&&!s.some(function(e){return e.classList.contains("hidden")});n.classList.toggle("fa-chevron-right",l),n.classList.toggle("fa-chevron-left",!l),r.classList.toggle("fa-chevron-left",l),r.classList.toggle("fa-chevron-right",!l)}}},{key:"_hoverNode",value:function(e){var t=e.target,n=!1,r=t.querySelector(":scope > .topEdge"),i=t.querySelector(":scope > .bottomEdge"),o=t.querySelector(":scope > .leftEdge");"mouseenter"===e.type?(r&&(n=this._getNodeState(t,"parent").visible,r.classList.toggle("fa-chevron-up",!n),r.classList.toggle("fa-chevron-down",n)),i&&(n=this._getNodeState(t,"children").visible,i.classList.toggle("fa-chevron-down",!n),i.classList.toggle("fa-chevron-up",n)),o&&this._switchHorizontalArrow(t)):Array.from(t.querySelectorAll(":scope > .edge")).forEach(function(e){e.classList.remove("fa-chevron-up","fa-chevron-down","fa-chevron-right","fa-chevron-left")})}},{key:"_clickNode",value:function(e){var t=e.currentTarget,n=this.chart.querySelector(".focused");n&&n.classList.remove("focused"),t.classList.add("focused")}},{key:"_buildParentNode",value:function(e,t,n){var r=this,i=document.createElement("table");t.relationship=t.relationship||"001",this._createNode(t,0).then(function(e){var t=r.chart;e.classList.remove("slide-up"),e.classList.add("slide-down");var o=document.createElement("tr"),a=document.createElement("tr"),s=document.createElement("tr"),l=document.createElement("tr");o.setAttribute("class","hidden"),o.innerHTML='<td colspan="2"></td>',i.appendChild(o),a.setAttribute("class","lines hidden"),a.innerHTML='<td colspan="2"><div class="downLine"></div></td>',i.appendChild(a),s.setAttribute("class","lines hidden"),s.innerHTML='<td class="rightLine">&nbsp;</td><td class="leftLine">&nbsp;</td>',i.appendChild(s),l.setAttribute("class","nodes"),l.innerHTML='<td colspan="2"></td>',i.appendChild(l),i.querySelector("td").appendChild(e),t.insertBefore(i,t.children[0]),i.children[3].children[0].appendChild(t.lastChild),n()}).catch(function(e){console.error("Failed to create parent node",e)})}},{key:"_switchVerticalArrow",value:function(e){e.classList.toggle("fa-chevron-up"),e.classList.toggle("fa-chevron-down")}},{key:"showParent",value:function(e){var t=this._prevAll(this._closest(e,function(e){return e.classList.contains("nodes")}));this._removeClass(t,"hidden"),this._addClass(Array(t[0].children).slice(1,-1),"hidden");var n=t[2].querySelector(".node");this._one(n,"transitionend",function(){n.classList.remove("slide"),this._isInAction(e)&&this._switchVerticalArrow(e.querySelector(":scope > .topEdge"))},this),this._repaint(n),n.classList.add("slide"),n.classList.remove("slide-down")}},{key:"showSiblings",value:function(e,t){var n=this,r=[],i=this._closest(e,function(e){return"TABLE"===e.nodeName}).parentNode;r=t?"left"===t?this._prevAll(i):this._nextAll(i):this._siblings(i),this._removeClass(r,"hidden");var o=this._prevAll(this._closest(e,function(e){return e.classList.contains("nodes")}));if(i=Array.from(o[0].querySelectorAll(":scope > .hidden")),t?this._removeClass(i.slice(0,2*r.length),"hidden"):this._removeClass(i,"hidden"),!this._getNodeState(e,"parent").visible){this._removeClass(o,"hidden");var a=o[2].querySelector(".node");this._one(a,"transitionend",function(e){e.target.classList.remove("slide")},this),this._repaint(a),a.classList.add("slide"),a.classList.remove("slide-down")}r.forEach(function(e){Array.from(e.querySelectorAll(".node")).forEach(function(e){n._isVisible(e)&&(e.classList.add("slide"),e.classList.remove("slide-left","slide-right"))})}),this._one(r[0].querySelector(".slide"),"transitionend",function(){var t=this;r.forEach(function(e){t._removeClass(Array.from(e.querySelectorAll(".slide")),"slide")}),this._isInAction(e)&&(this._switchHorizontalArrow(e),e.querySelector(".topEdge").classList.remove("fa-chevron-up"),e.querySelector(".topEdge").classList.add("fa-chevron-down"))},this)}},{key:"hideSiblings",value:function(e,t){var n=this,r=this._closest(e,function(e){return"TABLE"===e.nodeName}).parentNode;this._siblings(r).forEach(function(e){e.querySelector(".spinner")&&(n.chart.dataset.inAjax=!1)}),(!t||t&&"left"===t)&&this._prevAll(r).forEach(function(e){Array.from(e.querySelectorAll(".node")).forEach(function(e){n._isVisible(e)&&e.classList.add("slide","slide-right")})}),(!t||t&&"left"!==t)&&this._nextAll(r).forEach(function(e){Array.from(e.querySelectorAll(".node")).forEach(function(e){n._isVisible(e)&&e.classList.add("slide","slide-left")})});var i=[];this._siblings(r).forEach(function(e){Array.prototype.push.apply(i,Array.from(e.querySelectorAll(".slide")))});var o=[],a=!0,s=!1,l=void 0;try{for(var c,d=i[Symbol.iterator]();!(a=(c=d.next()).done);a=!0){var u=c.value,h=this._closest(u,function(e){return e.classList.contains("nodes")}).previousElementSibling;o.push(h),o.push(h.previousElementSibling)}}catch(e){s=!0,l=e}finally{try{!a&&d.return&&d.return()}finally{if(s)throw l}}(o=[].concat(M(new Set(o)))).forEach(function(e){e.style.visibility="hidden"}),this._one(i[0],"transitionend",function(n){var a=this;o.forEach(function(e){e.removeAttribute("style")});var s=[];s=t?"left"===t?this._prevAll(r,":not(.hidden)"):this._nextAll(r,":not(.hidden)"):this._siblings(r);var l=Array.from(this._closest(r,function(e){return e.classList.contains("nodes")}).previousElementSibling.querySelectorAll(":scope > :not(.hidden)")).slice(1,t?2*s.length+1:-1);this._addClass(l,"hidden"),this._removeClass(i,"slide"),s.forEach(function(e){Array.from(e.querySelectorAll(".node")).slice(1).forEach(function(e){a._isVisible(e)&&(e.classList.remove("slide-left","slide-right"),e.classList.add("slide-up"))})}),s.forEach(function(e){a._addClass(Array.from(e.querySelectorAll(".lines")),"hidden"),a._addClass(Array.from(e.querySelectorAll(".nodes")),"hidden"),a._addClass(Array.from(e.querySelectorAll(".verticalNodes")),"hidden")}),this._addClass(s,"hidden"),this._isInAction(e)&&this._switchHorizontalArrow(e)},this)}},{key:"hideParent",value:function(e){var t=Array.from(this._closest(e,function(e){return e.classList.contains("nodes")}).parentNode.children).slice(0,3);t[0].querySelector(".spinner")&&(this.chart.dataset.inAjax=!1),this._getNodeState(e,"siblings").visible&&this.hideSiblings(e);var n=t.slice(1);this._css(n,"visibility","hidden");var r=t[0].querySelector(".node"),i=this._getNodeState(r,"parent").visible;r&&this._isVisible(r)&&(r.classList.add("slide","slide-down"),this._one(r,"transitionend",function(){r.classList.remove("slide"),this._removeAttr(n,"style"),this._addClass(t,"hidden")},this)),r&&i&&this.hideParent(r)}},{key:"addParent",value:function(e,t){var n=this;this._buildParentNode(e,t,function(){if(!e.querySelector(":scope > .topEdge")){var t=document.createElement("i");t.setAttribute("class","edge verticalEdge topEdge fa"),e.appendChild(t)}n.showParent(e)})}},{key:"_startLoading",value:function(e,t){var n=this.options,r=this.chart;if(void 0!==r.dataset.inAjax&&"true"===r.dataset.inAjax)return!1;e.classList.add("hidden");var i=document.createElement("i");i.setAttribute("class","fa fa-circle-o-notch fa-spin spinner"),t.appendChild(i),this._addClass(Array.from(t.querySelectorAll(":scope > *:not(.spinner)")),"hazy"),r.dataset.inAjax=!0;var o=this.chartContainer.querySelector(".oc-export-btn"+(""!==n.chartClass?"."+n.chartClass:""));return o&&(o.disabled=!0),!0}},{key:"_endLoading",value:function(e,t){var n=this.options;e.classList.remove("hidden"),t.querySelector(":scope > .spinner").remove(),this._removeClass(Array.from(t.querySelectorAll(":scope > .hazy")),"hazy"),this.chart.dataset.inAjax=!1;var r=this.chartContainer.querySelector(".oc-export-btn"+(""!==n.chartClass?"."+n.chartClass:""));r&&(r.disabled=!1)}},{key:"_clickTopEdge",value:function(e){e.stopPropagation();var t=this,n=e.target,r=n.parentNode,i=this._getNodeState(r,"parent"),o=this.options;if(i.exist){var a=this._closest(r,function(e){return e.classList.contains("nodes")}).parentNode.firstChild.querySelector(".node");if(a.classList.contains("slide"))return;i.visible?(this.hideParent(r),this._one(a,"transitionend",function(){this._isInAction(r)&&(this._switchVerticalArrow(n),this._switchHorizontalArrow(r))},this)):this.showParent(r)}else{var s=n.parentNode.id;this._startLoading(n,r)&&this._getJSON("function"==typeof o.ajaxURL.parent?o.ajaxURL.parent(r.dataset.source):o.ajaxURL.parent+s).then(function(e){"true"===t.chart.dataset.inAjax&&Object.keys(e).length&&t.addParent(r,e)}).catch(function(e){console.error("Failed to get parent node data.",e)}).finally(function(){t._endLoading(n,r)})}}},{key:"hideChildren",value:function(e){var t=this,n=this._nextAll(e.parentNode.parentNode),r=n[n.length-1],i=[];r.querySelector(".spinner")&&(this.chart.dataset.inAjax=!1);var o=Array.from(r.querySelectorAll(".node")).filter(function(e){return t._isVisible(e)}),a=r.classList.contains("verticalNodes");a||(o.forEach(function(e){Array.prototype.push.apply(i,t._prevAll(t._closest(e,function(e){return e.classList.contains("nodes")}),".lines"))}),i=[].concat(M(new Set(i))),this._css(i,"visibility","hidden")),this._one(o[0],"transitionend",function(s){this._removeClass(o,"slide"),a?t._addClass(n,"hidden"):(i.forEach(function(e){e.removeAttribute("style"),e.classList.add("hidden"),e.parentNode.lastChild.classList.add("hidden")}),this._addClass(Array.from(r.querySelectorAll(".verticalNodes")),"hidden")),this._isInAction(e)&&this._switchVerticalArrow(e.querySelector(".bottomEdge"))},this),this._addClass(o,"slide slide-up")}},{key:"showChildren",value:function(e){var t=this,n=this,r=this._nextAll(e.parentNode.parentNode),i=[];this._removeClass(r,"hidden"),r.some(function(e){return e.classList.contains("verticalNodes")})?r.forEach(function(e){Array.prototype.push.apply(i,Array.from(e.querySelectorAll(".node")).filter(function(e){return n._isVisible(e)}))}):Array.from(r[2].children).forEach(function(e){Array.prototype.push.apply(i,Array.from(e.querySelector("tr").querySelectorAll(".node")).filter(function(e){return n._isVisible(e)}))}),this._repaint(i[0]),this._one(i[0],"transitionend",function(n){t._removeClass(i,"slide"),t._isInAction(e)&&t._switchVerticalArrow(e.querySelector(".bottomEdge"))},this),this._addClass(i,"slide"),this._removeClass(i,"slide-up")}},{key:"_buildChildNode",value:function(e,t,n){var r=t.children||t.siblings;e.querySelector("td").setAttribute("colSpan",2*r.length),this.buildHierarchy(e,{children:r},0,n)}},{key:"addChildren",value:function(e,t){var n=this,r=this.options,i=0;this.chart.dataset.inEdit="addChildren",this._buildChildNode.call(this,this._closest(e,function(e){return"TABLE"===e.nodeName}),t,function(){if(++i===t.children.length){if(!e.querySelector(".bottomEdge")){var o=document.createElement("i");o.setAttribute("class","edge verticalEdge bottomEdge fa"),e.appendChild(o)}if(!e.querySelector(".symbol")){var a=document.createElement("i");a.setAttribute("class","fa "+r.parentNodeSymbol+" symbol"),e.querySelector(":scope > .title").appendChild(a)}n.showChildren(e),n.chart.dataset.inEdit=""}})}},{key:"_clickBottomEdge",value:function(e){var t=this;e.stopPropagation();var n=this,r=this.options,i=e.target,o=i.parentNode,a=this._getNodeState(o,"children");if(a.exist){var s=this._closest(o,function(e){return"TR"===e.nodeName}).parentNode.lastChild;if(Array.from(s.querySelectorAll(".node")).some(function(e){return t._isVisible(e)&&e.classList.contains("slide")}))return;a.visible?this.hideChildren(o):this.showChildren(o)}else{var l=i.parentNode.id;this._startLoading(i,o)&&this._getJSON("function"==typeof r.ajaxURL.children?r.ajaxURL.children(o.dataset.source):r.ajaxURL.children+l).then(function(e){"true"===n.chart.dataset.inAjax&&e.children.length&&n.addChildren(o,e)}).catch(function(e){console.error("Failed to get children nodes data",e)}).finally(function(){n._endLoading(i,o)})}}},{key:"_complementLine",value:function(e,t,n){var r=e.parentNode.parentNode.children;r[0].children[0].setAttribute("colspan",2*t),r[1].children[0].setAttribute("colspan",2*t);for(var i=0;i<n;i++){var o=document.createElement("td"),a=document.createElement("td");o.setAttribute("class","rightLine topLine"),o.innerHTML="&nbsp;",r[2].insertBefore(o,r[2].children[1]),a.setAttribute("class","leftLine topLine"),a.innerHTML="&nbsp;",r[2].insertBefore(a,r[2].children[1])}}},{key:"_buildSiblingNode",value:function(e,t,n){var r=this,i=this,o=t.siblings?t.siblings.length:t.children.length,a="TD"===e.parentNode.nodeName?this._closest(e,function(e){return"TR"===e.nodeName}).children.length:1,s=a+o,l=s>1?Math.floor(s/2-1):0;if("TD"===e.parentNode.nodeName){var c=this._prevAll(e.parentNode.parentNode);c[0].remove(),c[1].remove();var d=0;i._buildChildNode.call(i,i._closest(e.parentNode,function(e){return"TABLE"===e.nodeName}),t,function(){if(++d===o){var t=Array.from(i._closest(e.parentNode,function(e){return"TABLE"===e.nodeName}).lastChild.children);if(a>1){var r=e.parentNode.parentNode;Array.from(r.children).forEach(function(e){t[0].parentNode.insertBefore(e,t[0])}),r.remove(),i._complementLine(t[0],s,a),i._addClass(t,"hidden"),t.forEach(function(e){i._addClass(e.querySelectorAll(".node"),"slide-left")})}else{var c=e.parentNode.parentNode;t[l].parentNode.insertBefore(e.parentNode,t[l+1]),c.remove(),i._complementLine(t[l],s,1),i._addClass(t,"hidden"),i._addClass(i._getDescElements(t.slice(0,l+1),".node"),"slide-right"),i._addClass(i._getDescElements(t.slice(l+1),".node"),"slide-left")}n()}})}else{var u=0;i.buildHierarchy.call(i,i.chart,t,0,function(){if(++u===s){var t=e.nextElementSibling.children[3].children[l],o=document.createElement("td");o.setAttribute("colspan",2),o.appendChild(e),t.parentNode.insertBefore(o,t.nextElementSibling),i._complementLine(t,s,1);var a=i._closest(e,function(e){return e.classList&&e.classList.contains("nodes")}).parentNode.children[0];a.classList.add("hidden"),i._addClass(Array.from(a.querySelectorAll(".node")),"slide-down");var c=r._siblings(e.parentNode);i._addClass(c,"hidden"),i._addClass(i._getDescElements(c.slice(0,l),".node"),"slide-right"),i._addClass(i._getDescElements(c.slice(l),".node"),"slide-left"),n()}})}}},{key:"addSiblings",value:function(e,t){var n=this;this.chart.dataset.inEdit="addSiblings",this._buildSiblingNode.call(this,this._closest(e,function(e){return"TABLE"===e.nodeName}),t,function(){if(n._closest(e,function(e){return e.classList&&e.classList.contains("nodes")}).dataset.siblingsLoaded=!0,!e.querySelector(".leftEdge")){var t=document.createElement("i"),r=document.createElement("i");t.setAttribute("class","edge horizontalEdge rightEdge fa"),e.appendChild(t),r.setAttribute("class","edge horizontalEdge leftEdge fa"),e.appendChild(r)}n.showSiblings(e),n.chart.dataset.inEdit=""})}},{key:"removeNodes",value:function(e){var t=this._closest(e,function(e){return"TABLE"===e.nodeName}).parentNode,n=this._siblings(t.parentNode);"TD"===t.nodeName?this._getNodeState(e,"siblings").exist?(n[2].querySelector(".topLine").nextElementSibling.remove(),n[2].querySelector(".topLine").remove(),n[0].children[0].setAttribute("colspan",n[2].children.length),n[1].children[0].setAttribute("colspan",n[2].children.length),t.remove()):(n[0].children[0].removeAttribute("colspan"),n[0].querySelector(".bottomEdge").remove(),this._siblings(n[0]).forEach(function(e){return e.remove()})):Array.from(t.parentNode.children).forEach(function(e){return e.remove()})}},{key:"_clickHorizontalEdge",value:function(e){var t=this;e.stopPropagation();var n=this,r=this.options,i=e.target,o=i.parentNode,a=this._getNodeState(o,"siblings");if(a.exist){var s=this._closest(o,function(e){return"TABLE"===e.nodeName}).parentNode;if(this._siblings(s).some(function(e){var n=e.querySelector(".node");return t._isVisible(n)&&n.classList.contains("slide")}))return;if(r.toggleSiblingsResp){var l=this._closest(o,function(e){return"TABLE"===e.nodeName}).parentNode.previousElementSibling,c=this._closest(o,function(e){return"TABLE"===e.nodeName}).parentNode.nextElementSibling;i.classList.contains("leftEdge")?l&&l.classList.contains("hidden")?this.showSiblings(o,"left"):this.hideSiblings(o,"left"):c&&c.classList.contains("hidden")?this.showSiblings(o,"right"):this.hideSiblings(o,"right")}else a.visible?this.hideSiblings(o):this.showSiblings(o)}else{var d=i.parentNode.id,u=this._getNodeState(o,"parent").exist?"function"==typeof r.ajaxURL.siblings?r.ajaxURL.siblings(JSON.parse(o.dataset.source)):r.ajaxURL.siblings+d:"function"==typeof r.ajaxURL.families?r.ajaxURL.families(JSON.parse(o.dataset.source)):r.ajaxURL.families+d;this._startLoading(i,o)&&this._getJSON(u).then(function(e){"true"===n.chart.dataset.inAjax&&(e.siblings||e.children)&&n.addSiblings(o,e)}).catch(function(e){console.error("Failed to get sibling nodes data",e)}).finally(function(){n._endLoading(i,o)})}}},{key:"_clickToggleButton",value:function(e){var t=this,n=e.target,r=n.parentNode.nextElementSibling,i=Array.from(r.querySelectorAll(".node")),o=Array.from(r.children).map(function(e){return e.querySelector(".node")});o.some(function(e){return e.classList.contains("slide")})||(n.classList.toggle("fa-plus-square"),n.classList.toggle("fa-minus-square"),i[0].classList.contains("slide-up")?(r.classList.remove("hidden"),this._repaint(o[0]),this._addClass(o,"slide"),this._removeClass(o,"slide-up"),this._one(o[0],"transitionend",function(){t._removeClass(o,"slide")})):(this._addClass(i,"slide slide-up"),this._one(i[0],"transitionend",function(){t._removeClass(i,"slide"),i.forEach(function(e){t._closest(e,function(e){return"UL"===e.nodeName}).classList.add("hidden")})}),i.forEach(function(e){var n=Array.from(e.querySelectorAll(".toggleBtn"));t._removeClass(n,"fa-minus-square"),t._addClass(n,"fa-plus-square")})))}},{key:"_dispatchClickEvent",value:function(e){var t=e.target.classList;t.contains("topEdge")?this._clickTopEdge(e):t.contains("rightEdge")||t.contains("leftEdge")?this._clickHorizontalEdge(e):t.contains("bottomEdge")?this._clickBottomEdge(e):t.contains("toggleBtn")?this._clickToggleButton(e):this._clickNode(e)}},{key:"_onDragStart",value:function(e){var t=e.target,n=this.options,r=/firefox/.test(window.navigator.userAgent.toLowerCase());if(r&&e.dataTransfer.setData("text/html","hack for firefox"),this.chart.style.transform){var i=void 0,o=void 0;document.querySelector(".ghost-node")?o=(i=this.chart.querySelector(":scope > .ghost-node")).children[0]:((i=document.createElementNS("http://www.w3.org/2000/svg","svg")).classList.add("ghost-node"),o=document.createElementNS("http://www.w3.org/2000/svg","rect"),i.appendChild(o),this.chart.appendChild(i));var a=this.chart.style.transform.split(","),s=Math.abs(window.parseFloat("t2b"===n.direction||"b2t"===n.direction?a[0].slice(a[0].indexOf("(")+1):a[1]));i.setAttribute("width",t.offsetWidth),i.setAttribute("height",t.offsetHeight),o.setAttribute("x",5*s),o.setAttribute("y",5*s),o.setAttribute("width",120*s),o.setAttribute("height",40*s),o.setAttribute("rx",4*s),o.setAttribute("ry",4*s),o.setAttribute("stroke-width",1*s);var l=e.offsetX*s,c=e.offsetY*s;if("l2r"===n.direction?(l=e.offsetY*s,c=e.offsetX*s):"r2l"===n.direction?(l=t.offsetWidth-e.offsetY*s,c=e.offsetX*s):"b2t"===n.direction&&(l=t.offsetWidth-e.offsetX*s,c=t.offsetHeight-e.offsetY*s),r){var d=document.createElement("img");d.src="data:image/svg+xml;utf8,"+(new XMLSerializer).serializeToString(i),e.dataTransfer.setDragImage(d,l,c),o.setAttribute("fill","rgb(255, 255, 255)"),o.setAttribute("stroke","rgb(191, 0, 0)")}else e.dataTransfer.setDragImage(i,l,c)}var u=e.target,h=null;null!==this._closest(u,function(e){return e.classList&&e.classList.contains("nodes")})&&(h=this._closest(u,function(e){return e.classList&&e.classList.contains("nodes")}).parentNode.children[0].querySelector(".node"));var f=Array.from(this._closest(u,function(e){return"TABLE"===e.nodeName}).querySelectorAll(".node"));this.dragged=u,Array.from(this.chart.querySelectorAll(".node")).forEach(function(e){f.includes(e)||(n.dropCriteria?n.dropCriteria(u,h,e)&&e.classList.add("allowedDrop"):e.classList.add("allowedDrop"))})}},{key:"_onDragOver",value:function(e){e.preventDefault(),e.currentTarget.classList.contains("allowedDrop")||(e.dataTransfer.dropEffect="none")}},{key:"_onDragEnd",value:function(e){Array.from(this.chart.querySelectorAll(".allowedDrop")).forEach(function(e){e.classList.remove("allowedDrop")})}},{key:"_onDrop",value:function(e){var t=e.currentTarget,n=this.chart,r=this.dragged,i=this._closest(r,function(e){return e.classList&&e.classList.contains("nodes")}).parentNode.children[0].children[0];if(this._removeClass(Array.from(n.querySelectorAll(".allowedDrop")),"allowedDrop"),t.parentNode.parentNode.nextElementSibling){var o=window.parseInt(t.parentNode.colSpan)+2;if(t.parentNode.setAttribute("colspan",o),t.parentNode.parentNode.nextElementSibling.children[0].setAttribute("colspan",o),!r.querySelector(".horizontalEdge")){var a=document.createElement("i"),s=document.createElement("i");a.setAttribute("class","edge horizontalEdge rightEdge fa"),r.appendChild(a),s.setAttribute("class","edge horizontalEdge leftEdge fa"),r.appendChild(s)}var l=t.parentNode.parentNode.nextElementSibling.nextElementSibling,c=document.createElement("td"),d=document.createElement("td");c.setAttribute("class","leftLine topLine"),c.innerHTML="&nbsp;",l.insertBefore(c,l.children[1]),d.setAttribute("class","rightLine topLine"),d.innerHTML="&nbsp;",l.insertBefore(d,l.children[2]),l.nextElementSibling.appendChild(this._closest(r,function(e){return"TABLE"===e.nodeName}).parentNode);var u=this._siblings(this._closest(r,function(e){return"TABLE"===e.nodeName}).parentNode).map(function(e){return e.querySelector(".node")});if(1===u.length){var h=document.createElement("i"),f=document.createElement("i");h.setAttribute("class","edge horizontalEdge rightEdge fa"),u[0].appendChild(h),f.setAttribute("class","edge horizontalEdge leftEdge fa"),u[0].appendChild(f)}}else{var p=document.createElement("i");p.setAttribute("class","edge verticalEdge bottomEdge fa"),t.appendChild(p),t.parentNode.setAttribute("colspan",2);var v=this._closest(t,function(e){return"TABLE"===e.nodeName}),g=document.createElement("tr"),m=document.createElement("tr"),y=document.createElement("tr");g.setAttribute("class","lines"),g.innerHTML='<td colspan="2"><div class="downLine"></div></td>',v.appendChild(g),m.setAttribute("class","lines"),m.innerHTML='<td class="rightLine">&nbsp;</td><td class="leftLine">&nbsp;</td>',v.appendChild(m),y.setAttribute("class","nodes"),v.appendChild(y),Array.from(r.querySelectorAll(".horizontalEdge")).forEach(function(e){r.removeChild(e)});var b=this._closest(r,function(e){return"TABLE"===e.nodeName}).parentNode;y.appendChild(b)}var _=window.parseInt(i.colSpan);if(_>2){i.setAttribute("colspan",_-2),i.parentNode.nextElementSibling.children[0].setAttribute("colspan",_-2);var A=i.parentNode.nextElementSibling.nextElementSibling;A.children[1].remove(),A.children[1].remove();var E=Array.from(i.parentNode.parentNode.children[3].children).map(function(e){return e.querySelector(".node")});1===E.length&&(E[0].querySelector(".leftEdge").remove(),E[0].querySelector(".rightEdge").remove())}else i.removeAttribute("colspan"),i.querySelector(".node").removeChild(i.querySelector(".bottomEdge")),Array.from(i.parentNode.parentNode.children).slice(1).forEach(function(e){return e.remove()});var S=new CustomEvent("nodedropped.orgchart",{detail:{draggedNode:r,dragZone:i.children[0],dropZone:t}});n.dispatchEvent(S)}},{key:"_createNode",value:function(e,t){var n=this,r=this.options;return new Promise(function(i,o){if(e.children){var a=!0,s=!1,l=void 0;try{for(var c,d=e.children[Symbol.iterator]();!(a=(c=d.next()).done);a=!0)c.value.parentId=e.id}catch(e){s=!0,l=e}finally{try{!a&&d.return&&d.return()}finally{if(s)throw l}}}var u=document.createElement("div");delete e.children,u.dataset.source=JSON.stringify(e),e[r.nodeId]&&(u.id=e[r.nodeId]);var h=n.chart.dataset.inEdit,f=void 0;f=h?"addChildren"===h?" slide-up":"":t>=r.depth?" slide-up":"",u.setAttribute("class","node "+(e.className||"")+f),r.draggable&&u.setAttribute("draggable",!0),e.parentId&&u.setAttribute("data-parent",e.parentId),u.innerHTML='\n        <div class="title">'+e[r.nodeTitle]+"</div>\n        "+(r.nodeContent?'<div class="content">'+e[r.nodeContent]+"</div>":"")+"\n      ";var p=e.relationship||"";if(r.verticalDepth&&t+2>r.verticalDepth){if(t+1>=r.verticalDepth&&Number(p.substr(2,1))){var v=document.createElement("i"),g=t+1>=r.depth?"plus":"minus";v.setAttribute("class","toggleBtn fa fa-"+g+"-square"),u.appendChild(v)}}else{if(Number(p.substr(0,1))){var m=document.createElement("i");m.setAttribute("class","edge verticalEdge topEdge fa"),u.appendChild(m)}if(Number(p.substr(1,1))){var y=document.createElement("i"),b=document.createElement("i");y.setAttribute("class","edge horizontalEdge rightEdge fa"),u.appendChild(y),b.setAttribute("class","edge horizontalEdge leftEdge fa"),u.appendChild(b)}if(Number(p.substr(2,1))){var _=document.createElement("i"),A=document.createElement("i"),E=u.querySelector(":scope > .title");_.setAttribute("class","edge verticalEdge bottomEdge fa"),u.appendChild(_),A.setAttribute("class","fa "+r.parentNodeSymbol+" symbol"),E.insertBefore(A,E.children[0])}}r.toggleCollapse&&(u.addEventListener("mouseenter",n._hoverNode.bind(n)),u.addEventListener("mouseleave",n._hoverNode.bind(n)),u.addEventListener("click",n._dispatchClickEvent.bind(n))),r.draggable&&(u.addEventListener("dragstart",n._onDragStart.bind(n)),u.addEventListener("dragover",n._onDragOver.bind(n)),u.addEventListener("dragend",n._onDragEnd.bind(n)),u.addEventListener("drop",n._onDrop.bind(n))),r.createNode&&r.createNode(u,e),i(u)})}},{key:"buildHierarchy",value:function(e,t,n,r){var i=this,o=this.options,a=void 0,s=t.children,l=o.verticalDepth&&n+1>=o.verticalDepth;if(Object.keys(t).length>1&&(a=l?e:document.createElement("table"),l||e.appendChild(a),this._createNode(t,n).then(function(e){if(l)a.insertBefore(e,a.firstChild);else{var t=document.createElement("tr");t.innerHTML="\n            <td "+(s?'colspan="'+2*s.length+'"':"")+">\n            </td>\n          ",t.children[0].appendChild(e),a.insertBefore(t,a.children[0]?a.children[0]:null)}r&&r()}).catch(function(e){console.error("Failed to creat node",e)})),s&&0!==s.length){1===Object.keys(t).length&&(a=e);var c=void 0,d=o.verticalDepth&&n+2>=o.verticalDepth,u=i.chart.dataset.inEdit;if(c=u?"addSiblings"===u?"":" hidden":n+1>=o.depth?" hidden":"",!d){var h=document.createElement("tr");h.setAttribute("class","lines"+c),h.innerHTML='\n          <td colspan="'+2*s.length+'">\n            <div class="downLine"></div>\n          </td>\n        ',a.appendChild(h)}var f=document.createElement("tr");f.setAttribute("class","lines"+c),f.innerHTML='\n        <td class="rightLine">&nbsp;</td>\n        '+s.slice(1).map(function(){return'\n          <td class="leftLine topLine">&nbsp;</td>\n          <td class="rightLine topLine">&nbsp;</td>\n          '}).join("")+'\n        <td class="leftLine">&nbsp;</td>\n      ';var p=void 0;if(d)if(p=document.createElement("ul"),c&&p.classList.add(c.trim()),n+2===o.verticalDepth){var v=document.createElement("tr");v.setAttribute("class","verticalNodes"+c),v.innerHTML="<td></td>",v.firstChild.appendChild(p),a.appendChild(v)}else a.appendChild(p);else(p=document.createElement("tr")).setAttribute("class","nodes"+c),a.appendChild(f),a.appendChild(p);s.forEach(function(e){var t=void 0;d?t=document.createElement("li"):(t=document.createElement("td")).setAttribute("colspan",2),p.appendChild(t),i.buildHierarchy(t,e,n+1,r)})}}},{key:"_clickChart",value:function(e){!this._closest(e.target,function(e){return e.classList&&e.classList.contains("node")})&&this.chart.querySelector(".node.focused")&&this.chart.querySelector(".node.focused").classList.remove("focused")}},{key:"_clickExportButton",value:function(){var e=this.options,t=this.chartContainer,n=t.querySelector(":scope > .mask"),r=t.querySelector(".orgchart:not(.hidden)"),i="l2r"===e.direction||"r2l"===e.direction;n?n.classList.remove("hidden"):((n=document.createElement("div")).setAttribute("class","mask"),n.innerHTML='<i class="fa fa-circle-o-notch fa-spin spinner"></i>',t.appendChild(n)),t.classList.add("canvasContainer"),window.html2canvas(r,{width:i?r.clientHeight:r.clientWidth,height:i?r.clientWidth:r.clientHeight,onclone:function(e){var t=e.querySelector(".canvasContainer");t.style.overflow="visible",t.querySelector(".orgchart:not(.hidden)").transform=""}}).then(function(e){var n=t.querySelector(".oc-download-btn");t.querySelector(".mask").classList.add("hidden"),n.setAttribute("href",e.toDataURL()),n.click()}).catch(function(e){console.error("Failed to export the curent orgchart!",e)}).finally(function(){t.classList.remove("canvasContainer")})}},{key:"_loopChart",value:function(e){var t=this,n={id:e.querySelector(".node").id};return e.children[3]&&Array.from(e.children[3].children).forEach(function(e){n.children||(n.children=[]),n.children.push(t._loopChart(e.firstChild))}),n}},{key:"_loopChartDataset",value:function(e){var t=this,n=JSON.parse(e.querySelector(".node").dataset.source);return e.children[3]&&Array.from(e.children[3].children).forEach(function(e){n.children||(n.children=[]),n.children.push(t._loopChartDataset(e.firstChild))}),n}},{key:"getChartJSON",value:function(){return this.chart.querySelector(".node").id?this._loopChartDataset(this.chart.querySelector("table")):"Error: Nodes of orghcart to be exported must have id attribute!"}},{key:"getHierarchy",value:function(){return this.chart.querySelector(".node").id?this._loopChart(this.chart.querySelector("table")):"Error: Nodes of orghcart to be exported must have id attribute!"}},{key:"_onPanStart",value:function(e){var t=e.currentTarget;if(this._closest(e.target,function(e){return e.classList&&e.classList.contains("node")})||e.touches&&e.touches.length>1)t.dataset.panning=!1;else{t.style.cursor="move",t.dataset.panning=!0;var n=0,r=0,i=window.getComputedStyle(t).transform;if("none"!==i){var o=i.split(",");i.includes("3d")?(n=Number.parseInt(o[12],10),r=Number.parseInt(o[13],10)):(n=Number.parseInt(o[4],10),r=Number.parseInt(o[5],10))}var a=0,s=0;if(e.targetTouches){if(1===e.targetTouches.length)a=e.targetTouches[0].pageX-n,s=e.targetTouches[0].pageY-r;else if(e.targetTouches.length>1)return}else a=e.pageX-n,s=e.pageY-r;t.dataset.panStart=JSON.stringify({startX:a,startY:s}),t.addEventListener("mousemove",this._onPanning.bind(this)),t.addEventListener("touchmove",this._onPanning.bind(this))}}},{key:"_onPanning",value:function(e){var t=e.currentTarget;if("false"!==t.dataset.panning){var n=0,r=0,i=JSON.parse(t.dataset.panStart),o=i.startX,a=i.startY;if(e.targetTouches){if(1===e.targetTouches.length)n=e.targetTouches[0].pageX-o,r=e.targetTouches[0].pageY-a;else if(e.targetTouches.length>1)return}else n=e.pageX-o,r=e.pageY-a;var s=window.getComputedStyle(t).transform;if("none"===s)s.includes("3d")?t.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+n+", "+r+", 0, 1)":t.style.transform="matrix(1, 0, 0, 1, "+n+", "+r+")";else{var l=s.split(",");s.includes("3d")?(l[12]=n,l[13]=r):(l[4]=n,l[5]=r+")"),t.style.transform=l.join(",")}}}},{key:"_onPanEnd",value:function(e){var t=this.chart;"true"===t.dataset.panning&&(t.dataset.panning=!1,t.style.cursor="default",document.body.removeEventListener("mousemove",this._onPanning),document.body.removeEventListener("touchmove",this._onPanning))}},{key:"_setChartScale",value:function(e,t){var n=window.getComputedStyle(e).transform;if("none"===n)e.style.transform="scale("+t+","+t+")";else{var r=n.split(",");n.includes("3d")?e.style.transform=n+" scale3d("+t+","+t+", 1)":(r[0]="matrix("+t,r[3]=t,e.style.transform=n+" scale("+t+","+t+")")}e.dataset.scale=t}},{key:"_onWheeling",value:function(e){e.preventDefault();var t=e.deltaY>0?.8:1.2;this._setChartScale(this.chart,t)}},{key:"_getPinchDist",value:function(e){return Math.sqrt((e.touches[0].clientX-e.touches[1].clientX)*(e.touches[0].clientX-e.touches[1].clientX)+(e.touches[0].clientY-e.touches[1].clientY)*(e.touches[0].clientY-e.touches[1].clientY))}},{key:"_onTouchStart",value:function(e){var t=this.chart;if(e.touches&&2===e.touches.length){var n=this._getPinchDist(e);t.dataset.pinching=!0,t.dataset.pinchDistStart=n}}},{key:"_onTouchMove",value:function(e){var t=this.chart;if(t.dataset.pinching){var n=this._getPinchDist(e);t.dataset.pinchDistEnd=n}}},{key:"_onTouchEnd",value:function(e){var t=this.chart;if(t.dataset.pinching){t.dataset.pinching=!1;var n=t.dataset.pinchDistEnd-t.dataset.pinchDistStart;n>0?this._setChartScale(t,1):n<0&&this._setChartScale(t,-1)}}},{key:"name",get:function(){return this._name}}]),e}(),H=Array.prototype.splice;o.prototype.clear=function(){this.__data__=[],this.size=0},o.prototype.delete=function(e){var t=this.__data__,n=i(t,e);return!(n<0||(n==t.length-1?t.pop():H.call(t,n,1),--this.size,0))},o.prototype.get=function(e){var t=this.__data__,n=i(t,e);return n<0?void 0:t[n][1]},o.prototype.has=function(e){return i(this.__data__,e)>-1},o.prototype.set=function(e,t){var n=this.__data__,r=i(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var R="object"==typeof e&&e&&e.Object===Object&&e,U="object"==typeof self&&self&&self.Object===Object&&self,z=R||U||Function("return this")(),F=z.Symbol,V=Object.prototype,J=V.hasOwnProperty,X=V.toString,Y=F?F.toStringTag:void 0,W=Object.prototype.toString,Z="[object Null]",Q="[object Undefined]",G=F?F.toStringTag:void 0,K="[object AsyncFunction]",$="[object Function]",ee="[object GeneratorFunction]",te="[object Proxy]",ne=z["__core-js_shared__"],re=function(){var e=/[^.]+$/.exec(ne&&ne.keys&&ne.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ie=Function.prototype.toString,oe=/^\[object .+?Constructor\]$/,ae=Function.prototype,se=Object.prototype,le=ae.toString,ce=se.hasOwnProperty,de=RegExp("^"+le.call(ce).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ue=d(z,"Map"),he=d(Object,"create"),fe="__lodash_hash_undefined__",pe=Object.prototype.hasOwnProperty,ve=Object.prototype.hasOwnProperty,ge="__lodash_hash_undefined__";u.prototype.clear=function(){this.__data__=he?he(null):{},this.size=0},u.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},u.prototype.get=function(e){var t=this.__data__;if(he){var n=t[e];return n===fe?void 0:n}return pe.call(t,e)?t[e]:void 0},u.prototype.has=function(e){var t=this.__data__;return he?void 0!==t[e]:ve.call(t,e)},u.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=he&&void 0===t?ge:t,this},f.prototype.clear=function(){this.size=0,this.__data__={hash:new u,map:new(ue||o),string:new u}},f.prototype.delete=function(e){var t=h(this,e).delete(e);return this.size-=t?1:0,t},f.prototype.get=function(e){return h(this,e).get(e)},f.prototype.has=function(e){return h(this,e).has(e)},f.prototype.set=function(e,t){var n=h(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var me=200;p.prototype.clear=function(){this.__data__=new o,this.size=0},p.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},p.prototype.get=function(e){return this.__data__.get(e)},p.prototype.has=function(e){return this.__data__.has(e)},p.prototype.set=function(e,t){var n=this.__data__;if(n instanceof o){var r=n.__data__;if(!ue||r.length<me-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new f(r)}return n.set(e,t),this.size=n.size,this};var ye=function(){try{var e=d(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),be=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}(),_e="object"==typeof t&&t&&!t.nodeType&&t,Ae=_e&&"object"==typeof n&&n&&!n.nodeType&&n,Ee=Ae&&Ae.exports===_e?z.Buffer:void 0,Se=Ee?Ee.allocUnsafe:void 0,Le=z.Uint8Array,Ce=Object.create,we=function(){function e(){}return function(t){if(!s(t))return{};if(Ce)return Ce(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Ne=function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object),xe=Object.prototype,qe="[object Arguments]",ke=Object.prototype,je=ke.hasOwnProperty,Be=ke.propertyIsEnumerable,Oe=_(function(){return arguments}())?_:function(e){return b(e)&&je.call(e,"callee")&&!Be.call(e,"callee")},Te=Array.isArray,Pe=9007199254740991,De="object"==typeof t&&t&&!t.nodeType&&t,Me=De&&"object"==typeof n&&n&&!n.nodeType&&n,Ie=Me&&Me.exports===De?z.Buffer:void 0,He=(Ie?Ie.isBuffer:void 0)||function(){return!1},Re="[object Object]",Ue=Function.prototype,ze=Object.prototype,Fe=Ue.toString,Ve=ze.hasOwnProperty,Je=Fe.call(Object),Xe={};Xe["[object Float32Array]"]=Xe["[object Float64Array]"]=Xe["[object Int8Array]"]=Xe["[object Int16Array]"]=Xe["[object Int32Array]"]=Xe["[object Uint8Array]"]=Xe["[object Uint8ClampedArray]"]=Xe["[object Uint16Array]"]=Xe["[object Uint32Array]"]=!0,Xe["[object Arguments]"]=Xe["[object Array]"]=Xe["[object ArrayBuffer]"]=Xe["[object Boolean]"]=Xe["[object DataView]"]=Xe["[object Date]"]=Xe["[object Error]"]=Xe["[object Function]"]=Xe["[object Map]"]=Xe["[object Number]"]=Xe["[object Object]"]=Xe["[object RegExp]"]=Xe["[object Set]"]=Xe["[object String]"]=Xe["[object WeakMap]"]=!1;var Ye="object"==typeof t&&t&&!t.nodeType&&t,We=Ye&&"object"==typeof n&&n&&!n.nodeType&&n,Ze=We&&We.exports===Ye&&R.process,Qe=function(){try{return Ze&&Ze.binding&&Ze.binding("util")}catch(t){}}(),Ge=Qe&&Qe.isTypedArray,Ke=Ge?function(e){return function(t){return e(t)}}(Ge):function(e){return b(e)&&A(e.length)&&!!Xe[a(e)]},$e=Object.prototype.hasOwnProperty,et=9007199254740991,tt=/^(?:0|[1-9]\d*)$/,nt=Object.prototype.hasOwnProperty,rt=Object.prototype.hasOwnProperty,it=Math.max,ot=ye?function(e,t){return ye(e,"toString",{configurable:!0,enumerable:!1,value:function(e){return function(){return e}}(t),writable:!0})}:j,at=800,st=16,lt=Date.now,ct=function(e){var t=0,n=0;return function(){var r=lt(),i=st-(r-n);if(n=r,i>0){if(++t>=at)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(ot),dt=function(e){return B(function(t,n){var i=-1,o=n.length,a=o>1?n[o-1]:void 0,l=o>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,l&&function(e,t,n){if(!s(n))return!1;var i=typeof t;return!!("number"==i?E(n)&&L(t,n.length):"string"==i&&t in n)&&r(n[t],e)}(n[0],n[1],l)&&(a=o<3?void 0:a,o=1),t=Object(t);++i<o;){var c=n[i];c&&e(t,c,i,a)}return t})}(function(e,t,n){k(e,t,n)}),ut=function(e,t){return dt(e,t)},ht={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"vo-basic",attrs:{id:"chart-container"}})},staticRenderFns:[],name:"orgchart",props:{data:{type:Object,default:function(){return{}}},pan:{type:Boolean,default:!1},zoom:{type:Boolean,default:!1},direction:{type:String,default:"t2b"},verticalDepth:{type:Number},toggleSiblingsResp:{type:Boolean,default:!1},ajaxURL:{type:Object},depth:{type:Number,default:999},nodeTitle:{type:String,default:"name"},parentNodeSymbol:{type:String,default:""},nodeContent:{type:String},nodeId:{type:String,default:"id"},createNode:{type:Function},exportButton:{type:Boolean,default:!1},exportButtonName:{type:String,default:"Export"},exportFilename:{type:String},chartClass:{type:String,default:""},draggable:{type:Boolean,default:!1},dropCriteria:{type:Function},toggleCollapse:{type:Boolean,default:!0}},data:function(){return{newData:null,orgchart:null,defaultOptions:{chartContainer:"#chart-container"}}},mounted:function(){null===this.newData&&this.initOrgChart()},methods:{initOrgChart:function(){var e=ut(this.defaultOptions,this.$props);this.orgchart=new I(e)}},watch:{data:function(e){var t=this;this.newData=e,new Promise(function(t){e&&t()}).then(function(){var e=ut(t.defaultOptions,t.$props);t.orgchart=new I(e)})}}},ft=function e(t,n){return t&&(n(t)&&t!==document.querySelector(".orgchart")?t:e(t.parentNode,n))},pt=function(e,t,n,r){r?document.querySelector(r).addEventListener(t,function(t){(t.target.classList&&t.target.classList.contains(e.slice(1))||ft(t.target,function(t){return t.classList&&t.classList.contains(e.slice(1))}))&&n(t)}):document.querySelectorAll(e).forEach(function(e){e.addEventListener(t,n)})},vt=function(e){var t=ft(e.target,function(e){return e.classList&&e.classList.contains("node")}),n=document.getElementById("selected-node");n.value=t.querySelector(".title").textContent,n.dataset.node=t.id},gt=function(e){ft(e.target,function(e){return e.classList&&e.classList.contains("node")})||(document.getElementById("selected-node").textContent="")},mt={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"vo-edit",attrs:{id:"chart-container"}})},staticRenderFns:[],name:"VoEdit",props:{data:{type:Object},pan:{type:Boolean,default:!1},zoom:{type:Boolean,default:!1},direction:{type:String,default:"t2b"},verticalDepth:{type:Number},toggleSiblingsResp:{type:Boolean,default:!1},ajaxURL:{type:Object},depth:{type:Number,default:999},nodeTitle:{type:String,default:"name"},parentNodeSymbol:{type:String,default:""},nodeContent:{type:String},nodeId:{type:String,default:"id"},createNode:{type:Function},exportButton:{type:Boolean,default:!1},exportButtonName:{type:String,default:"Export"},exportFilename:{type:String},chartClass:{type:String,default:""},draggable:{type:Boolean,default:!1},dropCriteria:{type:Function},toggleCollapse:{type:Boolean,default:!0}},data:function(){return{newData:null,orgchart:null,defaultOptions:{chartContainer:"#chart-container",createNode:function(e,t){e.id=1e3*(new Date).getTime()+Math.floor(1001*Math.random())}}}},mounted:function(){null===this.newData&&this.initOrgChart(),this.$nextTick(function(){pt(".node","click",vt,"#chart-container"),pt(".orgchart","click",gt,"#chart-container")})},methods:{initOrgChart:function(){var e=ut(this.defaultOptions,this.$props);this.orgchart=new I(e)}},watch:{data:function(e){var t=this;this.newData=e,new Promise(function(t){e&&t()}).then(function(){var e=ut(t.defaultOptions,t.$props);t.orgchart=new I(e)})}}};"undefined"!=typeof window&&window.Vue&&(window.Vue.component("vo-basic",ht),window.Vue.component("vo-edit",mt)),t.VoBasic=ht,t.VoEdit=mt,Object.defineProperty(t,"__esModule",{value:!0})})}).call(this,n("66fa"),n("35d1")(e))},9005:function(e,t,n){},dc53:function(e,t,n){"use strict";var r=n("9005"),i=n.n(r);i.a}}]);